# 录音工程添加音轨功能使用指南

## 功能概述

录音工程模块提供了完整的多轨录音和音轨管理功能，支持添加、编辑、混音和导出多个音轨。

## 界面布局

录音工程界面包含以下主要组件：

1. **录音控制区**：
   - 开始录音：启动录音功能
   - 停止录音：停止当前录音
   - 播放：播放当前录音会话
   - 添加音轨：添加新的音轨

2. **轨道管理区**：
   - 音轨列表：显示所有音轨及其状态
   - 支持单选操作

3. **混音控制区**：
   - 混音：将所有活动音轨混合输出
   - 导出项目：保存整个项目
   - 转换为MIDI：将选中音轨转换为MIDI文件
   - 生成五线谱：将选中音轨生成标准五线谱

## 添加音轨操作步骤

录音工程支持两种添加音轨的方式：

### 方法一：添加空音轨
1. 在录音工程界面中点击"添加空音轨"按钮
2. 系统会创建一个不包含音频数据的新音轨
3. 新音轨会自动显示在音轨列表中

### 方法二：加载外部音轨
1. 点击"加载外部音轨"按钮
2. 在文件选择对话框中选择音频文件
3. 支持格式：WAV, MP3, FLAC, AIFF, OGG
4. 系统会自动加载音频数据并创建新音轨

### 方法三：录音时自动添加
1. 点击"开始录音"
2. 录制完成后点击"停止录音"
3. 如果没有选中现有音轨，系统会自动创建新音轨并添加录音数据

## 音轨管理功能

### 音轨选择
- 在音轨列表中单击选择音轨
- 选中的音轨会高亮显示
- 后续的MIDI转换、简谱生成等操作会作用于选中的音轨

### 音轨状态
音轨列表显示以下信息：
- 音轨编号和名称
- 静音状态（正常/静音）

### 音轨操作
- **录音**：录音会自动添加到当前选中的音轨，或创建新音轨
- **混音**：将所有非静音音轨混合输出
- **导出**：保存整个项目为WAV或FLAC格式
- **转换**：将选中音轨转换为MIDI文件
- **五线谱**：将选中音轨生成标准五线谱图片

## 五线谱生成功能

### 功能特点
- **图形化五线谱**：生成专业的PNG或SVG格式五线谱图片
- **标准音乐记谱**：符合国际音乐理论标准的五线谱格式
- **高质量输出**：300 DPI高分辨率图片，适合打印和分享
- **多种格式支持**：支持PNG位图和SVG矢量图格式

### 生成的五线谱元素
1. **标准五线谱**：完整的五线谱线和间
2. **高音谱号**：标准的高音谱号(G谱号)标识
3. **音符符号**：实心/空心音符头、符干、升降号
4. **小节线**：自动分小节的垂直线
5. **专业布局**：合理的音符间距和页面布局

### 支持的音符类型
- 十六分音符 (16th)
- 八分音符 (eighth)  
- 四分音符 (quarter)
- 二分音符 (half)
- 全音符 (whole)

### 五线谱位置说明
以高音谱号（G谱号）为基准：
- 中央C (C4) 位于下加一线
- 向上音符：D4, E4, F4, G4, A4, B4, C5...
- 向下音符：B3, A3, G3, F3, E3, D3, C3...
- 自动符干方向：第三线以下向上，以上向下

### 使用方法
1. 在录音工程界面选择要转换的音轨
2. 点击"生成五线谱"按钮
3. 在文件保存对话框中选择PNG或SVG格式
4. 选择保存位置和文件名
5. 系统将自动生成专业的五线谱图片

### 图片格式说明
- **PNG格式**：适合屏幕显示和一般使用，文件较大
- **SVG格式**：矢量格式，无限缩放不失真，文件较小
- **分辨率**：300 DPI专业打印质量
- **颜色**：黑白标准乐谱格式

## 使用示例

### 基本录音流程
1. 点击"添加音轨"创建第一个音轨
2. 点击"开始录音"开始录制
3. 录制完成后点击"停止录音"
4. 音频数据会自动添加到音轨中
5. 重复步骤1-4添加更多音轨
6. 点击"混音"将所有音轨混合
7. 点击"导出项目"保存最终结果

### 多轨录音示例
```
音轨1：主唱录音
音轨2：伴奏音乐
音轨3：和声部分
音轨4：打击乐

操作流程：
1. 依次为每个部分添加音轨
2. 分别录制各个音轨
3. 使用混音功能合并所有音轨
4. 导出完整作品
```

## 注意事项

### 系统要求
- 确保麦克风或音频输入设备正常工作
- 建议使用44.1kHz采样率获得最佳音质
- 确保有足够的磁盘空间存储录音文件

### 最佳实践
1. **录音前准备**：
   - 检查音频输入设备
   - 调整合适的录音音量
   - 选择安静的录音环境

2. **音轨管理**：
   - 为每个音轨命名以便识别
   - 合理安排录音顺序
   - 及时保存项目进度

3. **混音技巧**：
   - 先录制主要音轨
   - 逐步添加辅助音轨
   - 混音前预听各音轨效果
   - 导出前进行最终检查

### 常见问题解决

**问题1：点击"添加音轨"没有反应**
- 检查是否已正确初始化录音工程界面
- 确认系统音频设备正常工作

**问题2：音轨列表显示为空**
- 界面初始化时会自动创建一个默认音轨
- 如果音轨列表仍为空，请重启软件

**问题3：录音无法保存到音轨**
- 确保录音过程中没有中断
- 检查磁盘空间是否充足
- 确认音频格式支持

**问题4：混音输出无声**
- 检查各音轨是否包含音频数据
- 确认音轨未被静音
- 验证音频数据格式正确

## 技术规格

### 支持的音频格式
- 输入：WAV, AIFF, FLAC, MP3
- 输出：WAV, FLAC
- MIDI转换：标准MIDI文件格式

### 音频参数
- 采样率：支持22050Hz, 44100Hz, 48000Hz
- 位深度：16位, 24位, 32位浮点
- 声道：单声道, 立体声

### 性能指标
- 实时录音延迟：<10ms
- 混音处理速度：实时处理
- 内存使用：根据音轨数量动态调整

## 故障排除

如果遇到功能异常，请按以下步骤排查：

1. **重启软件**：关闭后重新启动程序
2. **检查依赖**：确认所有音频库正常安装
3. **查看日志**：检查控制台输出的错误信息
4. **联系支持**：如果问题持续存在，请提供详细的操作步骤和错误信息

---
*本指南适用于AI音乐后期工程师软件 v1.0*